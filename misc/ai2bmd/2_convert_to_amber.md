# Preparing PDB Files for AI2BMD Simulations

## 1. Clean Up PyMOL-Generated PDB

From the PyMOL-generated file:

- Remove all `TER` lines.

---

## 2. Install AmberTools

```bash
conda install conda-forge::ambertools
````

> ⚠️ You may need **Python 3.11**.
> It is recommended to create a dedicated conda environment.

Example:

```bash
conda create -n ai2bmd python=3.11
conda activate ai2bmd
conda install conda-forge::ambertools
```

---

## 3. Process the PDB File with `pdb4amber`

```bash
pdb4amber -i your_protein.pdb -o processed_your_protein.pdb --nohyd --add-missing-atoms
```

---

## 4. Rename `HETATM` to `ATOM`

The easiest way (using `vim`):

```vim
:%s/HETATM/ATOM  /g
```

---

## 5. Fix C-Terminal NMET Cap Residues

Match the naming exactly as in the demo data:

1. Remove the orphan carbon generated by PyMOL.
2. Rename the cap atoms exactly as:

```
N
H
CH3
HH31
HH32
HH33
```

⚠️ Atom names must match **exactly** for compatibility.

---

## Final Checklist

* [ ] `TER` records removed
* [ ] Processed with `pdb4amber`
* [ ] `HETATM` renamed to `ATOM`
* [ ] C-terminal NMET cap fixed and renamed properly
* [ ] Python 3.11 environment confirmed
